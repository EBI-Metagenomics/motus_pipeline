manifest {
    mainScript = 'main.nf'
}

params {
    output = '/Users/kates/Desktop/EBI/pipelines/motus_pipeline/results'

    min_length = 10
    polya_trim = 10
    qualified_quality_phred = 15
    unqualified_percent_limit = 10

    name = "mgtest"
    reads = '/Users/kates/Desktop/EBI/pipelines/motus_pipeline/test_data/bwa/'
    reference_genome = '/Users/kates/Desktop/EBI/pipelines/motus_pipeline/test_data/bwa/ref'
    reference_genome_name = 'GRCh38_chr10.fasta'

    sequence  = '/Users/kates/Desktop/EBI/pipelines/motus_pipeline/test_data/assembly-SRR1620013_small_FASTA.fasta.gz'

    // mapseq
    mapseq_db  = '/Users/kates/Desktop/EBI/pipelines/motus_pipeline/test_data/mapseq/silva-SSU'
    mapseq_taxonomy = '/Users/kates/Desktop/EBI/pipelines/motus_pipeline/test_data/mapseq/silva-filt.txt'
    mapseq_seq = '/Users/kates/Desktop/EBI/pipelines/motus_pipeline/test_data/mapseq/test.SSU.fasta'

    // krona
    otu = '/Users/kates/Desktop/EBI/pipelines/motus_pipeline/test_data/test.tsv'

    // mapseq2biom
    mapseq = '/Users/kates/Desktop/EBI/pipelines/motus_pipeline/test_data/mapseq2biom/test-mapseq'
    otu_ref = '/Users/kates/Desktop/EBI/pipelines/motus_pipeline/test_data/mapseq2biom/test-otu'
    otu_label = 'test'

    // cmsearch
    sequences = '/Users/kates/Desktop/EBI/pipelines/motus_pipeline/test_data/cmsearch/mrum-genome.fa'
    covariance_model_database = '/Users/kates/Desktop/EBI/pipelines/motus_pipeline/test_data/cmsearch/'
    clan_information = '/Users/kates/Desktop/EBI/pipelines/motus_pipeline/test_data/cmsearch/ribo.claninfo'
}

profiles {

    lsf {
        workDir = params.workdir
        executor {
            name = "lsf"
            queueSize = 200
        }
        process.cache = "lenient"
    }

    singularity {
        singularity {
            enabled = true
            autoMounts = true
            cacheDir = params.singularity_cachedir
        }
    }

    ebi {
 	    params {
 	        output = "results"
 	        workdir = "/hps/nobackup/rdf/metagenomics/nextflow-jobstore/motus_pipeline"
            singularity_cachedir = "/hps/nobackup/rdf/metagenomics/singularity_cache_nextflow/"
            min_length = 10
            polya_trim = 10
            qualified_quality_phred = 15
            unqualified_percent_limit = 10

            name = "mgtest"
            reads = 'test_data/bwa/'
            reference_genome = 'test_data/bwa/ref'
            reference_genome_name = 'GRCh38_chr10.fasta'
        }
        workDir = params.workdir

        executor {
            name = "lsf"
            queueSize = 200
        }
        process.cache = "lenient"

        singularity {
            enabled = true
            autoMounts = true
            cacheDir = params.singularity_cachedir
        }

        process {
            withLabel: process_bigmem {
                queue = 'bigmem'
            }
        }
    }

    docker {
        enabled = true
        fixOwnership = true
    }

    local {
         singularity {
            enabled = true
            autoMounts = true
            remove = false
        }
        executor {
            name = "local"
        }
    }
}
